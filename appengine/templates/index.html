<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script type="text/javascript" src="/static/third_party/jwplayer/jwplayer.js"></script>
    <script type="text/javascript" src="/static/third_party/flowplayer/example/flowplayer-3.2.6.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
    <title>Tim's Video Streaming</title>
  </head>
<body>

  <div id="page">
    <div id="sizer-player" style="display:block;width:100%;height:100%;margin: 0 auto;">
      <a href="" id="player"></a>
    </div>
  </div>

<script type="text/javascript">
var streamer="http://ec2-50-19-36-221.compute-1.amazonaws.com:8080/";

// Offline streaming
var offline = streamer+'webcast-low.ogv';

// HTML5 streaming
var html5_high = [
  { file: streamer+'webcast-high.webm' },
  { file: streamer+'webcast-high.ogv' },
  //{ file: streamer+'webcast-high.mp4' },
];
var html5_low = [
  { file: streamer+'webcast-low.webm' },
  { file: streamer+'webcast-low.ogv' },
  //{ file: streamer+'webcast-low.mp4' },
];
// Flash streaming
var flash_high = [
  { bitrate: 800, file: streamer+'webcast-high.flv', width: 720 }
];
var flash_low = [
  { bitrate: 300, file: streamer+'webcast-low.flv', width: 432 },
];
// Flash Streaming - with automatic format switching
var flash_auto = flash_high+flash_low;

var all = html5_high+flash_auto;

jwplayer("player").setup({
  autostart: true,
  plugins: {
    qualitymonitor: {}
  },
  skin: '/static/third_party/jwplayer/skin/glow.zip',
  modes: [
    {type: "html5",
      config: {levels: html5_high}},
    {type: "flash", src: "/static/third_party/jwplayer/player.swf",
      config: {levels: flash_auto}},
    {type: "download",
      config: {file: offline}},
  ]
});

function fit_player () {
  var p = $("#sizer-player");
  console.log("fit_player", p.width(), p.height());
  jwplayer("player").resize(p.width(), p.height());
}

$(window).resize(fit_player);
fit_player();

    </script>
</body>
</html>
