{% extends "base.html" %}
{% comment %}
-*- coding: utf-8 -*-
vim: set ts=2 sw=2 et sts=2 ai:
{% endcomment %}

{% block head %}
    <script type="text/javascript" src="/static/third_party/jquery-extra/jquery.juitter-1.0.0.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="stylesheet" type="text/css" href="/static/css/tweet.css">
    <link rel="stylesheet" type="text/css" href="/static/third_party/jquery-extra/jquery.juitter-1.0.0.css">
    <title>Tim's Video Streaming for {{ group|upper }}</title>
{% endblock %}

{% block content %}
      <th id="options" colspan=2>
        <div class="options-group container_1">
          Tweet&nbsp;with&nbsp;hashtag:&nbsp;{{hashtag}}
        </div>
        <div class="options-group container_1">
          Web&nbsp;chat&nbsp;at&nbsp;http://view.streamti.me/{{group}}
        </div>
        <div class="options-group container_1">
          Join&nbsp;IRC&nbsp;on&nbsp;irc://irc.frenode.net/#{{channel}}
        </div>
      </th>
    </tr><tr>
      <td id="twitter-cell" style="height: auto;">
        <div id="twitter-container" class="container_3">
          <div id="twitter-sizer" class="sizer">
            <div id="twitter-juitter">
              <div id="juitterContainer"></div>
            </div>
          </div>
        </div>
      </td>
      <td id="chat-cell" style="width: 60%;">
        <div id="chat-container" class="container_3">
          <div id="chat-sizer" class="sizer">
            {% if screen %}
            <iframe id="chat-frame"
              src="http://webchat.freenode.net?nick=videoscreen-{{group|urlencode}}&channels={{ group|urlencode }}&uio=MTA9dHJ1ZSYxMT0yMzYe4"></iframe>
            {% else %}
            <iframe id="chat-frame" src="http://webchat.freenode.net?channels={{ group|urlencode }}&uio=MTA9dHJ1ZQ49"></iframe>
            {% endif %}
          </div>
        </div>
      </td>
{% endblock %}

{% block script %}
<script type="text/javascript">
function resize() {
 $("#twitter-juitter").height(5);
 $("#twitter-juitter").height($("#twitter-cell").innerHeight()-20);
}
$.Juitter.onUpdate = resize;
$(window).resize(resize);

$(document).ready(function() {
  resize();
  $.Juitter.start({
    live:"live-5",
    total: 20,
    searchType: "searchWord",
    searchObject: "{{ hashtag|urlencode }}",
    });
});
</script>  
{% endblock %}
